// *** switch *** //
@mixin switch($key: ('size': 20px)){
  $style: if(map-get($key, 'style'), map-get($key, 'style'), 'toggle');
  $color: if(map-get($key, 'color'), map-get($key, 'color'), (#ddd, #3DD754));
  $size: if(map-get($key, 'size'), map-get($key, 'size'), (em(20), em(20)));
  $text: map-get($key, 'text');
  $border-radius: map-get($key, 'border-radius');
  
  $default-color: false;
  $active-color: false;
  @if type-of($color) == 'list' {
    $default-color: nth($color, 1);
    @if length($color) >= 2 {
      $active-color: nth($color, 2);
    } @else {
      $active-color: $default-color;
    }
  } @else if type-of($color) == 'color' {
    $default-color: $color;    
    $active-color: $default-color;
  }

  $width: false;
  $height: false;
  @if type-of($size) == 'list' {
    $width: nth($size, 1);
    @if length($size) >= 2 {
      $height: nth($size, 2);
    }
  } @else if type-of($size) == 'number' {
    $width: $size;    
  }
  @if not $height { $height: $width; }

  $width: em($width);
  $height: em($height);
  $gap: ($height / 8);

  // hide checkbox or radio
  > input {
    position: absolute; 
    left: -9999px;
  }

  @if $text {
    label > span {
      position: absolute;
      left: $gap;
      top: $gap;
      display: inline-block;
      white-space: nowrap;
      color: contrast( ('color': $default-color) );
      transition: color 0.3s;
      .lt-ie9 & { color: #fff; }
      &:before, &:after {
        display: inline-block;
        line-height: $height;
        width: $width;
        text-align: center;
      }
      &:before { content: '#{nth($text, 1)}'; }
      &:after { content: '#{nth($text, 2)}'; }
    }
  }

  > input {
    // normal style
    ~ label {
      display: inline-block;
      height: $height;
      line-height: $height;
      transition: padding 0.3s, background 0.3s;

      @if $style == 'toggle' {
        background: $default-color;
        padding: $gap ($height * 0.85) $gap $gap;
      } @else if $style == 'slider' {
        $width: $width * 1.8;
        text-align: left;
        position: relative;
        padding: 0 $width 0 0;
        &:before, &:after { transition: background 0.3s; }
        &:before {
          content: '';
          width: $width;
          height: 1px;
          position: absolute;
          left: ($height / 2);
          top: ($height / 2);
          z-index: -1;
          background: $default-color;
          .lt-ie9 & { background: $active-color; }
        }
      }

      @if $border-radius {
        border-radius: $border-radius;
      }

      @if $text {
        position: relative;
        width: $width;
        padding-right: ($width * 2 - $height * 0.85);
      }

      &:after {
        content: '';
        display: inline-block;
        height: $height;
        background: #fff;

        @if $style == 'toggle' {
          width: $width;
          box-shadow: 0 $gap $gap 0 rgba(0, 0, 0, 0.2);
        } @else if $style == 'slider' {
          width: $height;
          box-shadow: 0 ($gap / 1.3) $gap 0 rgba(0, 0, 0, 0.2);
          .lt-ie9 & { background: $active-color; }
        }

        @if $border-radius {
          border-radius: $border-radius;
        }

        @if $text { position: relative; }
      }
    }

    // active style
    &:checked ~ label {
      padding: $gap $gap $gap ($height * 0.85);
      @if $style == 'toggle' {
        background: $active-color;
      } @else if $style == 'slider' {
        padding: 0 0 0 $width;
        &:before, &:after {
          background: $active-color;
        }
      }

      @if $text {
        padding-left: ($width * 2 - $height * 0.85);
        > span { color: contrast( ('color': $active-color) ); }
      }
    }
  }
}
