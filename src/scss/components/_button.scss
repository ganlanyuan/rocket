/// Short hands for creating button.
/// inspiration from http://tympanus.net/Development/ButtonStylesInspiration/
/// 
/// $key: `$font-size $padding $color radius round hover`
/// @group components
/// @param {number | list} $key - key 
/// @example scss - Usage
/// .button { @include button(14px #00c8ff '0.8em 1em' radius hover); }
/// // font-size: 14px;
/// // background-color: #00c8ff;
/// // padding: 0.8em 1em; (Tips: padding must be quoted)
/// // radius: 0.22em; (default, you can modify it by change the varible "$ro-button-radius: 0.22em;" )
/// // hover: true; (change background-color when mouse over)
/// 
/// @link http://creatiointl.org/gallery/william/rocket/components-button.php demo
/// @link https://github.com/ganlanyuan/rocket full document

@mixin button ($key: '0.5em 0.8em' radius){
  $padding: false;
  $check: join($ro-button-hover, ('round' 'hover' 'horizontal' 'vertical' 'customize'));

  $color: ro-get-type($key, 'color'); 
  $round: ro-get($key, 'round');
  $radius: false;
  $customize: ro-get($key, 'customize');

  $horizontal: ro-get($key, 'horizontal');
  $vertical: ro-get($key, 'vertical');
  $direction: ro-get($key, (left right top bottom));

  $hover: ro-get($key, $ro-button-hover);
  $duration: 0.3s;
  $timing-function: ease;

  @each $item in $key {
    @if type-of($item) == 'number' {
      @if unit($item) == 's' {
        $duration: $item;
      } @else if unit($item) == 'px' or unit($item) == 'em' or unit($item) == 'rem' or unit($item) == 'vw' {
        $radius: $item;
      }
    } @else if type-of($item) == 'string' {
      @if index($ro-timing-function, $item) or str-index($item, 'cubic-bezier') {
        $timing-function: unquote($item);
      } @else if not index($check, $item) {
        @each $u in $ro-unit {
          @if str-index($item, $u) {
            $padding: unquote($item);
          }
        }
      }
    }
  }

  // *** output *** //
  @extend %button-style;
  @if $padding {
    @if not index(('push'), $hover) {
      padding: $padding;
    }
  }
  @if $radius {
    border-radius: $radius;
  }
  @if $round {
    border-radius: $ro-button-round;
  }
  @if $color {
    @if not index(('simple' 'veil' 'line-drawing'), $hover) {
      background-color: $color;
      color: contrast($color);
    }

    @if $hover {
      @if $hover == 'slide' {
        @include button-pos-r();
        &:before {
          @include button-pos-a();
          width: 100%;
          height: 100%;
          @if not $direction { $direction: left; }
          @if index((left right), $direction) {
            top: 0;
          } @else {
            left: 0;
          }
          #{$direction}: -100%;
          background-color: lighten($color, $ro-lightness);
          transition: #{$direction} $duration $timing-function;
        }
        &:hover {
          @if contrast($color) != contrast(lighten($color, $ro-lightness)) {
            color: contrast(lighten($color, $ro-lightness));
          }
          &:before { #{$direction}: 0; }
        }
      } @else if $hover == 'highlight' {
        transition: background-color $duration $timing-function, color $duration $timing-function;
        &:hover {
          background-color: analogous($color $ro-lightness);
          @if contrast($color) != contrast(analogous($color $ro-lightness)) {
            color: contrast(analogous($color $ro-lightness));
          }
        }
      } @else if $hover == 'simple' {
        color: $color;
        border: 2px solid $color;
        background-color: transparent;
        transition: background-color $duration $timing-function, border-color $duration $timing-function, color $duration $timing-function;
        &:hover {
          color: contrast($color);
          border: 2px solid $color;
          background-color: $color;
        }
      } @else if $hover == 'ripple' {
        @include button-pos-r();
        &:before {
          @include button-pos-a();
          @include transform(scale(0));
          opacity: 1;
          content: '';
          position: absolute;
          left: 50%;
          top: 50%;
          z-index: -1;
          width: 10em;
          height: 10em;
          margin-left: -5em;
          margin-top: -5em;
          border-radius: 50%;
          background-color: analogous($color $ro-lightness);
          @include keyframes(button-ripple) {
            to {
              @include transform(scale(1));
              opacity: 0;
            }
          }
          .no-csstransforms & { display: none; }
        }
        &:hover:before {
          @include animation(button-ripple 1s 1);
          .no-csstransforms & { display: block; }
        }
      } @else if $hover == 'veil' {
        @include button-pos-r();
        color: $color;
        border: 2px solid $color;
        background-color: transparent;
        transition: background-color $duration $timing-function, color $duration $timing-function;
        &:before {
          @include button-pos-a();
          @include opacity(0);
          @if $vertical {
            @include transform(scaleY(0.7));
          } @else {
            @include transform(scaleX(0.7));
          }
          left: 0;
          top: 0;
          width: 100%;
          height: 100%;
          background-color: $color;
          transition: transform $duration $timing-function, opacity $duration $timing-function;
          .no-csstransforms & { display: none; }
        }
        &:hover {
          color: contrast($color);
          &:before {
            @include opacity(1);
            @if $vertical {
              @include transform(scaleY(1));
            } @else {
              @include transform(scaleX(1));
            }
            .no-csstransforms & { display: block; }
          }
        }
      } @else if $hover == 'push' {
        @include button-pos-r();
        span, &:before {
          @if $padding {
            padding: $padding;
          }
          transition: transform $duration $timing-function, opacity $duration $timing-function;
        }
        span {
          @include opacity(1);
          @include transform(translateY(0));
          display: block;
        }
        &:before {
          @include opacity(0);
          @if $direction == bottom {
            @include transform(translateY(-20%));
          } @else if $direction == left {
            @include transform(translateX(20%));
          } @else if $direction == right {
            @include transform(translateX(-20%));
          } @else {
            @include transform(translateY(20%));
          }
          @if $padding {
            padding: $padding;
          }
          @if not $customize {
            content: attr(data-text);
          }
          position: absolute;
          left: 0;
          top: 0;
          width: 100%;
          height: 100%;
          box-sizing: border-box;
          .no-csstransforms & { display: none; }
        }
        &:hover {
          span {
            @include opacity(0);
            @if $direction == bottom {
              @include transform(translateY(20%));
            } @else if $direction == left {
              @include transform(translateX(-20%));
            } @else if $direction == right {
              @include transform(translateX(20%));
            } @else {
              @include transform(translateY(-20%));
            }
          }
          &:before {
            @include opacity(1);
            @include transform(translateY(0));
            .no-csstransforms & { display: block; }
          }
        }
      } @else if $hover == 'cut' {
        @include button-pos-r;
        transition: color $duration $timing-function;
        &:before {
          @include button-pos-a;
          @include transform(rotate3d(0, 0, 1, -45deg) translate3d(0px, -3em, 0px));
          @include transform-origin(0% 100% 0px);
          left: 0;
          top: 0;
          width: 150%;
          height: 100%;
          background-color: analogous($color $ro-lightness);
          transition: transform $duration $timing-function;
          .no-csstransforms & { display: none; }
        }
        &:hover {
          &:before {
            @include transform(rotate3d(0, 0, 1, 0deg));
            .no-csstransforms & { display: block; }
          }
        }
      } @else if $hover == 'bubble' {
        @include button-pos-r();
        overflow: visible;
        &:before {
          @include button-pos-a();
          @if $radius {
            border-radius: $radius * 1.3;
          }
          left: 0;
          right: 0;
          top: 0;
          bottom: 0;
          opacity: 0;
          border: 1px solid rgba($color, 0.7);
          transition: transform $duration $timing-function, opacity $duration $timing-function;
          @include keyframes(button-bubble) {
            60% {
              left: -0.7em;
              right: -0.7em;
              top: -0.7em;
              bottom: -0.7em;
              opacity: 0.8;
            }
            100% {
              left: -1em;
              right: -1em;
              top: -1em;
              bottom: -1em;
              opacity: 0;
            }
          }
        }
        &:hover {
          &:before {
            @include animation(button-bubble 0.7s 1);
          }
        }
      } @else if $hover == 'line-drawing' {
        @include button-pos-r();
        span {
          position: absolute;
          display: block;
          box-sizing: border-box;
          background-color: $color;
          transition: width $duration $timing-function, height $duration $timing-function;
          &:nth-child(1) {
            left: 0;
            top: 0;
          }
          &:nth-child(2) {
            right: 0;
            bottom: 0;
          }
          &:nth-child(3) {
            top: 0;
            right: 0;
          }
          &:nth-child(4) {
            left: 0;
            bottom: 0;
          }
          &:nth-child(1), 
          &:nth-child(2) {
            width: 0;
            height: 1px;
          }
          &:nth-child(3), 
          &:nth-child(4) {
            width: 1px;
            height: 0;
          }
        }
        &:hover {
          span {
            &:nth-child(1),
            &:nth-child(2) { width: 100%; }
            &:nth-child(3),
            &:nth-child(4) { height: 100%; }
          }
        }
      } @else if $hover == 'new' {
      }
    } 
  }

  @if $hover == 'shake' {
    @include keyframes(button-shake) {
      0%, 100% { transform: translateX(0);}
      16.6%, 50%, 83.3% { transform: translateX(-0.6em);}
      33.3%, 66.6% { transform: translateX(0.6em);}
    }
    &:hover { @include animation(button-shake $duration 1); }
  }
}

@mixin button-pos-r (){
  position: relative;
  overflow: hidden;
  z-index: 1;
}
@mixin button-pos-a (){
  content: '';
  position: absolute;
  z-index: -1;
}
