/// Pure css tabs.   
/// 
/// $key: `$length $style`
/// @group components
/// @param {number | list} $key - key 
/// @example markup -markup
/// <!-- 
///   .ro-tabs and .ro-panels are required
///   -->
/// 
/// <div class="your-tab-class">
///   <input type="radio" name="your-radio-name" id="your-radio-id-1" checked>
///   <input type="radio" name="your-radio-name" id="your-radio-id-2">
///   <input type="radio" name="your-radio-name" id="your-radio-id-3">
///   <!-- ... -->
///   <div class="ro-tabs">
///     <label for="your-radio-id-1">tab 1</label>
///     <label for="your-radio-id-2">tab 2</label>
///     <label for="your-radio-id-3">tab 3</label>
///     <!-- ... -->
///   </div>
///   <div class="ro-panels">
///     <div>
///       <!-- Your tab-panels 1 -->
///     </div>
///     <div>
///       <!-- Your tab-panels 2 -->
///     </div>
///     <div>
///       <!-- Your tab-panels 3 -->
///     </div>
///   </div>
/// </div>
/// @example scss -scss
/// .your-tab-class { @include tabs(3 'carousel'); }
/// // length: 3; (3 tabs)
/// // style: carousel; (normal | carousel | customize)
///
/// @link http://creatiointl.org/gallery/william/rocket/components-tabs.php demo
/// @link https://github.com/ganlanyuan/rocket full document

@mixin tabs($key) {
  $length: ro-get-type($key, 'number', 0);
  $style: ro-get($key, $ro-tabs-style, 'normal');

  // *** output *** //
  > input {
    position: absolute; 
    left: -9999em;
  }
  @if $style == 'normal' {
    > .ro-panels > div {
      display: none;
    }
  } @else if $style == 'carousel' {
    overflow-x: hidden;
    > .ro-panels {
      @at-root (without: media) {
        @extend %ro-clearfix;
        @extend %ro-global-transition;
      }
      position: relative;
      left: 0;
      width: (100% * $length);
      > div {
        float: left;
        width: percentage(1 / $length);
        box-sizing: border-box;
      }
    }
  } @else if $style =='customize' {
    > .ro-panels > div {
      @content;
    }
  }

  @for $i from 1 through $length {
    > input:nth-child(#{$i}):checked ~ {
      .ro-panels {
        @if $style == 'normal' {
          > div:nth-child(#{$i}) {
            display: block;
          }
        } @else if $style == 'carousel' {
          left: - percentage(($i - 1));
        }
      }
    }
  }
}

/// Set tabs' active styles.
/// 
/// $key: `$length`
/// @group components
/// @param {number} $key - key 
/// @example scss - Usage
/// .your-tab-class { 
///   @include tabs-active(3) {
///     // tab active style
///   } 
/// }
/// // length: 3; (3 tabs)
///
/// @link http://creatiointl.org/gallery/william/rocket/components-tabs.php demo
/// @link https://github.com/ganlanyuan/rocket full document

@mixin tabs-active($key) {
  $length: ro-get-type($key, 'number', 0);
  $len-base: str-length(selector-str()) + 1 + 1; // space: 1
  $path: '';

  // get selector
  @for $i from 1 through $length {
    > input:nth-child(#{$i}):checked ~ {
      .ro-tabs > label:nth-child(#{$i}) {
        $path: $path + selector-str-sliced($len-base);
      }
    }
  }
  
  // *** output *** //
  $path: str-remove-comma($path);
  #{$path} { @content; }
}

/// Set panels' active styles.
/// 
/// $key: `$length`
/// @group components
/// @param {number} $key - key 
/// @example scss - Usage
/// .your-tab-class { 
///   @include tabs-panel-active(3) {
///     // panel active style
///   } 
/// }
/// // length: 3; (3 tabs)
///
/// @link http://creatiointl.org/gallery/william/rocket/components-tabs.php demo
/// @link https://github.com/ganlanyuan/rocket full document

@mixin tabs-panel-active($key) {
  $length: ro-get-type($key, 'number', 0);
  $len-base: str-length(selector-str()) + 1 + 1; // space: 1, index +1
  $path: '';

  // get selector
  @for $i from 1 through $length {
    > input:nth-child(#{$i}):checked ~ {
      .ro-panels > div:nth-child(#{$i}) {
        $path: $path + selector-str-sliced($len-base);
      }
    }
  }
  // *** output *** //
  $path: str-remove-comma($path);
  #{$path} { @content; }
}
