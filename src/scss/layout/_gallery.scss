@import 'wrap';

@mixin gallery(
  $per-row,
  $gutter: map-get($layout, gutter),
  $child: 'li',
  $position: 'middle',
  $keep: false
){
  $selector: null;

	// add unit to gutter
  @if $gutter and unitless($gutter) and $gutter > 0 and $gutter < 1 { $gutter: percentage($gutter); }

  // set up gallery container
  @if not $keep {
    @if $gutter and $gutter != 0 and $gutter != null {
      @include wrap($gutter);
    }
  }
  @at-root (without: media) { @extend %layout-wrap; }

  // set up gallery items
  > #{$child} {
    width: percentage(1 / $per-row);
    @at-root (without: media) { @extend %layout-span; }

    // set up gallery gutter
    @if not $keep {
      @if $gutter and $gutter != 0 and $gutter != null {
        @if $position == bottom { padding: 0 ($gutter / 2) $gutter; }
        @else { padding: ($gutter / 2); }
      }
    }
  }
}
